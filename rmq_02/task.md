Что имеем:
Всего 4 страны: ru, de, uk, us.

Также имеется 3 типа дрона.

В сообщении от дрона приходят его координаты и время отправки.

В метаданных (хедерах или ключе) сообщения приходят страна и тип:

- `country`` = %страна%
- drone_type = %тип дрона% (всего 3 типа: weather, monitoring, delivery)

Вид ключа: event.drone.%тип дрона%.%страна%.gps.

Примеры сообщения от дрона, следящего за погодой в Англии:


event.drone.weather.uk.gps

headers: {}

body: {"lat": 52.250607474636254, "lon": 0.9945251371722521, "time": 1659635152.8692353}


event.drone.gps

headers: {

"country": "uk",

"drone_type": "weather",

"x-stream-offset": 50547

}

body: {"lat": 52.61252990085446, "lon": 0.1722998006295811, "time": 1659635152.8696706}

Пример «сломанного» сообщения:


QwErWtq

headers: {}

body: {"lat": 52.250607474636254, "lon": 0.9945251371722521, "time": 1659635152.8692353}

